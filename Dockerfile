FROM ansibleplaybookbundle/apb-base

LABEL "com.redhat.apb.version"="0.1.0"
LABEL "com.redhat.apb.spec"=\
"LS0tCiMjIFNoYXJlZCBwYXJhbWV0ZXJzCl9iaW5kX3BhcmFtczogJl9iaW5kX3BhcmFtcwojIFBy\
b3Zpc2lvbiBiaW5kIHBhcmFtcwogIC0gbmFtZTogc2VydmljZV9uYW1lCiAgICBkaXNwbGF5X2dy\
b3VwOiBQcm92aXNpb24KICAgIHJlcXVpcmVkOiBUcnVlCiAgICB0aXRsZTogTmFtZSBvZiB0aGUg\
c2VydmljZSB0byBiaW5kCiAgICB0eXBlOiBzdHJpbmcKICAtIG5hbWU6IHJlZGlyZWN0X3VyaXMK\
ICAgIGRpc3BsYXlfZ3JvdXA6IFByb3Zpc2lvbgogICAgcmVxdWlyZWQ6IFRydWUKICAgIHRpdGxl\
OiBSZWRpcmVjdCBVUklzCiAgICBkZXNjcmlwdGlvbjogVmFsaWQgUmVkaXJlY3QgVVJJcyBhIGJy\
b3dzZXIgY2FuIHJlZGlyZWN0IHRvIGFmdGVyIGEgc3VjY2Vzc2Z1bCBsb2dpbi9sb2dvdXQuIFNp\
bXBsZSB3aWxkY2FyZHMgYXJlIGFsbG93ZWQuIGUuZy4gaHR0cHM6Ly9teXNlcnZpY2UtbXlwcm9q\
ZWN0LmFwcHMuZXhhbXBsZS5jb20vKgogICAgdHlwZTogc3RyaW5nCiAgLSBuYW1lOiB3ZWJfb3Jp\
Z2lucwogICAgZGlzcGxheV9ncm91cDogUHJvdmlzaW9uCiAgICB0aXRsZTogV2ViIE9yaWdpbnMK\
ICAgIGRlc2NyaXB0aW9uOiBXZWIgT3JpZ2lucyB0byBhbGxvdyBDT1JTCiAgICB0eXBlOiBzdHJp\
bmcKICAjIEJpbmQgc2VjcmV0IHBhcmFtcyAod2hpY2ggZW52IHZhcmlhYmxlcyB0byBjcmVhdGUp\
CiAgLSBuYW1lOiBzc29fdXJsX25hbWUKICAgIGRlZmF1bHQ6IFNTT19VUkwKICAgIGRpc3BsYXlf\
Z3JvdXA6IEJpbmRpbmcKICAgIHRpdGxlOiBLZXljbG9hayBVUkwgVmFyaWFibGUgbmFtZQogICAg\
ZGVzY3JpcHRpb246IEhvdyB0aGUgYXBwbGljYXRpb24gd2lsbCByZWZlciB0byB0aGUgS2V5Y2xv\
YWsgVVJMCiAgICB0eXBlOiBzdHJpbmcKICAtIG5hbWU6IHNzb19yZWFsbV9uYW1lCiAgICBkZWZh\
dWx0OiBTU09fUkVBTE0KICAgIGRpc3BsYXlfZ3JvdXA6IEJpbmRpbmcKICAgIHRpdGxlOiBLZXlj\
bG9hayBSZWFsbSBWYXJpYWJsZSBuYW1lCiAgICBkZXNjcmlwdGlvbjogSG93IHRoZSBhcHBsaWNh\
dGlvbiB3aWxsIHJlZmVyIHRvIHRoZSBLZXljbG9hayBSZWFsbQogICAgdHlwZTogc3RyaW5nCiAg\
LSBuYW1lOiBzc29fY2xpZW50X25hbWUKICAgIGRlZmF1bHQ6IFNTT19DTElFTlQKICAgIGRpc3Bs\
YXlfZ3JvdXA6IEJpbmRpbmcKICAgIHRpdGxlOiBLZXljbG9hayBDbGllbnQgVmFyaWFibGUgbmFt\
ZQogICAgZGVzY3JpcHRpb246IEhvdyB0aGUgYXBwbGljYXRpb24gd2lsbCByZWZlciB0byB0aGUg\
S2V5Y2xvYWsgQ2xpZW50IG5hbWUKICAgIHR5cGU6IHN0cmluZwoKdmVyc2lvbjogMS4wCm5hbWU6\
IHJoc3NvLWFwYgpkZXNjcmlwdGlvbjogU2luZ2xlIFNpZ24tT24gLSBPcGVuIFNvdXJjZSBJZGVu\
dGl0eSBhbmQgQWNjZXNzIE1hbmFnZW1lbnQKYmluZGFibGU6IFRydWUKYXN5bmM6IG9wdGlvbmFs\
CnRhZ3M6CiAgLSBzc28KICAtIGtleWNsb2FrCiAgLSByaHNzbwptZXRhZGF0YToKICBkaXNwbGF5\
TmFtZTogU2luZ2xlIFNpZ24tT24gKEFQQikKICBpbWFnZVVybDogImh0dHBzOi8vcGJzLnR3aW1n\
LmNvbS9wcm9maWxlX2ltYWdlcy83MDIxMTk4MjE5NzkzNDQ4OTcvb0FDMDVjRUJfNDAweDQwMC5w\
bmciCiAgZG9jdW1lbnRhdGlvblVybDogImh0dHBzOi8vYWNjZXNzLnJlZGhhdC5jb20vZG9jdW1l\
bnRhdGlvbi9lbi9yZWQtaGF0LXNpbmdsZS1zaWduLW9uLyIKICBwcm92aWRlckRpc3BsYXlOYW1l\
OiAiUmVkIEhhdCwgSW5jLiIKICBkZXBlbmRlbmNpZXM6IFsnUG9zdGdyZXNxbDo5LjUnXQogIHNl\
cnZpY2VOYW1lOiByaHNzbwpwbGFuczoKICAtIG5hbWU6IGVwaGVtZXJhbAogICAgZGVzY3JpcHRp\
b246IERlcGxveSBTaW5nbGUgU2lnbi1PbiB3aXRob3V0IHBlcnNpc3RlbmNlCiAgICBmcmVlOiBU\
cnVlCiAgICBtZXRhZGF0YToKICAgICAgZGlzcGxheU5hbWU6IFNpbmdsZSBTaWduLU9uIGVwaGVt\
ZXJhbAogICAgcGFyYW1ldGVyczoKICAgICAgLSBuYW1lOiBhZG1pbl91c2VybmFtZQogICAgICAg\
IHJlcXVpcmVkOiBUcnVlCiAgICAgICAgZGVmYXVsdDogYWRtaW4KICAgICAgICB0eXBlOiBzdHJp\
bmcKICAgICAgICB0aXRsZTogS2V5Y2xvYWsgYWRtaW4gdXNlcm5hbWUKICAgICAgLSBuYW1lOiBh\
ZG1pbl9wYXNzd29yZAogICAgICAgIHJlcXVpcmVkOiBUcnVlCiAgICAgICAgdHlwZTogc3RyaW5n\
CiAgICAgICAgZGlzcGxheV90eXBlOiBwYXNzd29yZAogICAgICAgIHRpdGxlOiBLZXljbG9hayBh\
ZG1pbiBwYXNzd29yZAogICAgICAtIG5hbWU6IGFwYl9rZXljbG9ha191cmkKICAgICAgICByZXF1\
aXJlZDogRmFsc2UKICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgICB0aXRsZTogS2V5Y2xvYWsg\
VVJMCiAgICAgICAgZGVzY3JpcHRpb246IFVSTCB3aGVyZSB0aGUgYXBwbGljYXRpb25zIHNob3Vs\
ZCByZWRpcmVjdCB0byBmb3IgYXV0aGVudGljYXRpb24uIE11c3QgYmUgcmVzb2x2YWJsZSBieSB0\
aGUgYnJvd3NlciBhbmQgcG9kcy4gTGVhdmUgZW1wdHkgdG8gdXNlIHRoZSBob3N0IGdlbmVyYXRl\
ZCBieSB0aGUgcm91dGUKICAgICAgLSBuYW1lOiBrZXljbG9ha191c2VycwogICAgICAgIHJlcXVp\
cmVkOiBGYWxzZQogICAgICAgIHR5cGU6IHN0cmluZwogICAgICAgIGRpc3BsYXlfdHlwZTogdGV4\
dGFyZWEKICAgICAgICB0aXRsZTogVXNlcnMKICAgICAgICBkZXNjcmlwdGlvbjogSlNPTiBkZWZp\
bmluZyB0aGUgdXNlcnMgdG8gYWRkIHRvIHRoZSByZWFsbSBhbmQgdGhlaXIgbWVtYmVyc2hpcHMK\
ICAgICAgLSBuYW1lOiBrZXljbG9ha19yb2xlcwogICAgICAgIHJlcXVpcmVkOiBGYWxzZQogICAg\
ICAgIHR5cGU6IHN0cmluZwogICAgICAgIGRpc3BsYXlfdHlwZTogdGV4dGFyZWEKICAgICAgICB0\
aXRsZTogUm9sZXMKICAgICAgICBkZXNjcmlwdGlvbjogSlNPTiBkZWZpbmluZyB0aGUgcm9sZXMg\
dG8gYWRkIHRvIHRoZSByZWFsbQogICAgYmluZF9wYXJhbWV0ZXJzOiAqX2JpbmRfcGFyYW1zCgog\
IC0gbmFtZTogcGVyc2lzdGVudAogICAgZGVzY3JpcHRpb246IERlcGxveSBTaW5nbGUgU2lnbi1P\
biB3aXRoIHBlcnNpc3RlbmNlCiAgICBmcmVlOiBUcnVlCiAgICBkZWZhdWx0OiBUcnVlCiAgICBt\
ZXRhZGF0YToKICAgICAgZGlzcGxheU5hbWU6IFNpbmdsZSBTaWduLU9uIHBlcnNpc3RlbnQKICAg\
IHBhcmFtZXRlcnM6CiAgICAgIC0gbmFtZTogYWRtaW5fdXNlcm5hbWUKICAgICAgICByZXF1aXJl\
ZDogVHJ1ZQogICAgICAgIGRlZmF1bHQ6IGFkbWluCiAgICAgICAgdHlwZTogc3RyaW5nCiAgICAg\
ICAgdGl0bGU6IEtleWNsb2FrIGFkbWluIHVzZXJuYW1lCiAgICAgIC0gbmFtZTogYWRtaW5fcGFz\
c3dvcmQKICAgICAgICByZXF1aXJlZDogVHJ1ZQogICAgICAgIHR5cGU6IHN0cmluZwogICAgICAg\
IGRpc3BsYXlfdHlwZTogcGFzc3dvcmQKICAgICAgICB0aXRsZTogS2V5Y2xvYWsgYWRtaW4gcGFz\
c3dvcmQKICAgICAgLSBuYW1lOiBhcGJfa2V5Y2xvYWtfdXJpCiAgICAgICAgcmVxdWlyZWQ6IEZh\
bHNlCiAgICAgICAgdHlwZTogc3RyaW5nCiAgICAgICAgdGl0bGU6IEtleWNsb2FrIFVSTAogICAg\
ICAgIGRlc2NyaXB0aW9uOiBVUkwgd2hlcmUgdGhlIGFwcGxpY2F0aW9ucyBzaG91bGQgcmVkaXJl\
Y3QgdG8gZm9yIGF1dGhlbnRpY2F0aW9uLiBNdXN0IGJlIHJlc29sdmFibGUgYnkgdGhlIGJyb3dz\
ZXIgYW5kIHBvZHMuIExlYXZlIGVtcHR5IHRvIHVzZSB0aGUgaG9zdCBnZW5lcmF0ZWQgYnkgdGhl\
IHJvdXRlCiAgICAgIC0gbmFtZTogcHZjX3NpemUKICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAg\
ICBkZWZhdWx0OiAyMDBNaQogICAgICAgIGRlc2NyaXB0aW9uOiBEYXRhYmFzZSBzdG9yYWdlIHNp\
emUKICAgICAgICB0aXRsZTogU3RvcmFnZSBzaXplCiAgICAgIC0gbmFtZToga2V5Y2xvYWtfdXNl\
cnMKICAgICAgICByZXF1aXJlZDogRmFsc2UKICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgICBk\
aXNwbGF5X3R5cGU6IHRleHRhcmVhCiAgICAgICAgdGl0bGU6IFVzZXJzCiAgICAgICAgZGVzY3Jp\
cHRpb246IEpTT04gZGVmaW5pbmcgdGhlIHVzZXJzIHRvIGFkZCB0byB0aGUgcmVhbG0gYW5kIHRo\
ZWlyIG1lbWJlcnNoaXBzCiAgICAgIC0gbmFtZToga2V5Y2xvYWtfcm9sZXMKICAgICAgICByZXF1\
aXJlZDogRmFsc2UKICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgICBkaXNwbGF5X3R5cGU6IHRl\
eHRhcmVhCiAgICAgICAgdGl0bGU6IFJvbGVzCiAgICAgICAgZGVzY3JpcHRpb246IEpTT04gZGVm\
aW5pbmcgdGhlIHJvbGVzIHRvIGFkZCB0byB0aGUgcmVhbG0KICAgIGJpbmRfcGFyYW1ldGVyczog\
Kl9iaW5kX3BhcmFtcwoKICAtIG5hbWU6IGV4dGVybmFsCiAgICBkZXNjcmlwdGlvbjogQWxsb3dz\
IGF1dGhlbnRpY2F0aW5nIGFwcGxpY2F0aW9ucyB0byBhbiBleHRlcm5hbCBLZXljbG9hayBpbnN0\
YW5jZQogICAgZnJlZTogVHJ1ZQogICAgbWV0YWRhdGE6CiAgICAgIGRpc3BsYXlOYW1lOiBTaW5n\
bGUgU2lnbi1PbiAoZXh0ZXJuYWwpCiAgICBwYXJhbWV0ZXJzOgogICAgICAtIG5hbWU6IGFkbWlu\
X3VzZXJuYW1lCiAgICAgICAgcmVxdWlyZWQ6IFRydWUKICAgICAgICBkZWZhdWx0OiBhZG1pbgog\
ICAgICAgIHR5cGU6IHN0cmluZwogICAgICAgIHRpdGxlOiBLZXljbG9hayBhZG1pbiB1c2VybmFt\
ZQogICAgICAtIG5hbWU6IGFkbWluX3Bhc3N3b3JkCiAgICAgICAgcmVxdWlyZWQ6IFRydWUKICAg\
ICAgICB0eXBlOiBzdHJpbmcKICAgICAgICBkaXNwbGF5X3R5cGU6IHBhc3N3b3JkCiAgICAgICAg\
dGl0bGU6IEtleWNsb2FrIGFkbWluIHBhc3N3b3JkCiAgICAgIC0gbmFtZTogYXBiX2tleWNsb2Fr\
X3VyaQogICAgICAgIHJlcXVpcmVkOiBUcnVlCiAgICAgICAgdHlwZTogc3RyaW5nCiAgICAgICAg\
dGl0bGU6IEtleWNsb2FrIFVSTAogICAgICAgIGRlc2NyaXB0aW9uOiBVUkwgd2hlcmUgdGhlIGFw\
cGxpY2F0aW9ucyBzaG91bGQgcmVkaXJlY3QgdG8gZm9yIGF1dGhlbnRpY2F0aW9uLiBNdXN0IGJl\
IHJlc29sdmFibGUgYnkgdGhlIGJyb3dzZXIgYW5kIHBvZHMuCiAgICAgIC0gbmFtZToga2V5Y2xv\
YWtfdXNlcnMKICAgICAgICByZXF1aXJlZDogRmFsc2UKICAgICAgICB0eXBlOiBzdHJpbmcKICAg\
ICAgICBkaXNwbGF5X3R5cGU6IHRleHRhcmVhCiAgICAgICAgdGl0bGU6IFVzZXJzCiAgICAgICAg\
ZGVzY3JpcHRpb246IEpTT04gZGVmaW5pbmcgdGhlIHVzZXJzIHRvIGFkZCB0byB0aGUgcmVhbG0g\
YW5kIHRoZWlyIG1lbWJlcnNoaXBzCiAgICAgIC0gbmFtZToga2V5Y2xvYWtfcm9sZXMKICAgICAg\
ICByZXF1aXJlZDogRmFsc2UKICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgICBkaXNwbGF5X3R5\
cGU6IHRleHRhcmVhCiAgICAgICAgdGl0bGU6IFJvbGVzCiAgICAgICAgZGVzY3JpcHRpb246IEpT\
T04gZGVmaW5pbmcgdGhlIHJvbGVzIHRvIGFkZCB0byB0aGUgcmVhbG0KICAgIGJpbmRfcGFyYW1l\
dGVyczogKl9iaW5kX3BhcmFtcwo="

COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles

RUN chmod -R g=u /opt/{ansible,apb}
USER apb
