FROM ansibleplaybookbundle/apb-base

LABEL "com.redhat.apb.version"="0.1.0"
LABEL "com.redhat.apb.spec"=\
"IyMgU2hhcmVkIHBhcmFtZXRlcnMKX2JpbmRfcGFyYW1zOiAmX2JpbmRfcGFyYW1zCiMgUHJvdmlz\
aW9uIGJpbmQgcGFyYW1zCiAgLSBuYW1lOiBzZXJ2aWNlX25hbWUKICAgIGRpc3BsYXlfZ3JvdXA6\
IFByb3Zpc2lvbgogICAgcmVxdWlyZWQ6IFRydWUKICAgIHRpdGxlOiBOYW1lIG9mIHRoZSBzZXJ2\
aWNlIHRvIGJpbmQKICAgIHR5cGU6IHN0cmluZwogIC0gbmFtZTogcmVkaXJlY3RfdXJpcwogICAg\
ZGlzcGxheV9ncm91cDogUHJvdmlzaW9uCiAgICByZXF1aXJlZDogVHJ1ZQogICAgdGl0bGU6IFJl\
ZGlyZWN0IFVSSXMKICAgIGRlc2NyaXB0aW9uOiBWYWxpZCBSZWRpcmVjdCBVUklzIGEgYnJvd3Nl\
ciBjYW4gcmVkaXJlY3QgdG8gYWZ0ZXIgYSBzdWNjZXNzZnVsIGxvZ2luL2xvZ291dC4gU2ltcGxl\
IHdpbGRjYXJkcyBhcmUgYWxsb3dlZC4gZS5nLiBodHRwczovL215c2VydmljZS1teXByb2plY3Qu\
YXBwcy5leGFtcGxlLmNvbS8qCiAgICB0eXBlOiBzdHJpbmcKICAtIG5hbWU6IHdlYl9vcmlnaW5z\
CiAgICBkaXNwbGF5X2dyb3VwOiBQcm92aXNpb24KICAgIHRpdGxlOiBXZWIgT3JpZ2lucwogICAg\
ZGVzY3JpcHRpb246IFdlYiBPcmlnaW5zIHRvIGFsbG93IENPUlMKICAgIHR5cGU6IHN0cmluZwog\
ICMgQmluZCBzZWNyZXQgcGFyYW1zICh3aGljaCBlbnYgdmFyaWFibGVzIHRvIGNyZWF0ZSkKICAt\
IG5hbWU6IHNzb191cmxfbmFtZQogICAgZGVmYXVsdDogU1NPX1VSTAogICAgZGlzcGxheV9ncm91\
cDogQmluZGluZwogICAgdGl0bGU6IEtleWNsb2FrIFVSTCBWYXJpYWJsZSBuYW1lCiAgICBkZXNj\
cmlwdGlvbjogSG93IHRoZSBhcHBsaWNhdGlvbiB3aWxsIHJlZmVyIHRvIHRoZSBLZXljbG9hayBV\
UkwKICAgIHR5cGU6IHN0cmluZwogIC0gbmFtZTogc3NvX3JlYWxtX25hbWUKICAgIGRlZmF1bHQ6\
IFNTT19SRUFMTQogICAgZGlzcGxheV9ncm91cDogQmluZGluZwogICAgdGl0bGU6IEtleWNsb2Fr\
IFJlYWxtIFZhcmlhYmxlIG5hbWUKICAgIGRlc2NyaXB0aW9uOiBIb3cgdGhlIGFwcGxpY2F0aW9u\
IHdpbGwgcmVmZXIgdG8gdGhlIEtleWNsb2FrIFJlYWxtCiAgICB0eXBlOiBzdHJpbmcKICAtIG5h\
bWU6IHNzb19jbGllbnRfbmFtZQogICAgZGVmYXVsdDogU1NPX0NMSUVOVAogICAgZGlzcGxheV9n\
cm91cDogQmluZGluZwogICAgdGl0bGU6IEtleWNsb2FrIENsaWVudCBWYXJpYWJsZSBuYW1lCiAg\
ICBkZXNjcmlwdGlvbjogSG93IHRoZSBhcHBsaWNhdGlvbiB3aWxsIHJlZmVyIHRvIHRoZSBLZXlj\
bG9hayBDbGllbnQgbmFtZQogICAgdHlwZTogc3RyaW5nCnZlcnNpb246IDEuMApuYW1lOiBrZXlj\
bG9hay1hcGIKZGVzY3JpcHRpb246IEtleWNsb2FrIC0gT3BlbiBTb3VyY2UgSWRlbnRpdHkgYW5k\
IEFjY2VzcyBNYW5hZ2VtZW50CmJpbmRhYmxlOiBUcnVlCmFzeW5jOiBvcHRpb25hbAp0YWdzOgog\
IC0gc3NvCiAgLSBrZXljbG9hawptZXRhZGF0YToKICBkaXNwbGF5TmFtZTogS2V5Y2xvYWsgKEFQ\
QikKICBjb25zb2xlLm9wZW5zaGlmdC5pby9pY29uQ2xhc3M6IGljb24tc3NvCiAgZG9jdW1lbnRh\
dGlvblVybDogImh0dHA6Ly93d3cua2V5Y2xvYWsub3JnL2RvY3VtZW50YXRpb24uaHRtbCIKICBw\
cm92aWRlckRpc3BsYXlOYW1lOiAiUmVkIEhhdCwgSW5jLiIKICBkZXBlbmRlbmNpZXM6CiAgICAt\
ICdkb2NrZXIuaW8vamJvc3Mva2V5Y2xvYWstb3BlbnNoaWZ0OjMuNC4zLkZpbmFsJwogICAgLSAn\
UG9zdGdyZVNRTCBBUEInCiAgICAtICdNYXJpYURCIEFQQicKICAgIC0gJ015U1FMIEFQQicKICBz\
ZXJ2aWNlTmFtZToga2V5Y2xvYWsKcGxhbnM6CiAgLSBuYW1lOiBlcGhlbWVyYWwKICAgIGRlc2Ny\
aXB0aW9uOiBEZXBsb3kga2V5Y2xvYWsgd2l0aG91dCBwZXJzaXN0ZW5jZQogICAgZnJlZTogVHJ1\
ZQogICAgbWV0YWRhdGE6CiAgICAgIGRpc3BsYXlOYW1lOiBLZXljbG9hayBlcGhlbWVyYWwKICAg\
IHBhcmFtZXRlcnM6CiAgICAgIC0gbmFtZTogYWRtaW5fdXNlcm5hbWUKICAgICAgICByZXF1aXJl\
ZDogVHJ1ZQogICAgICAgIGRlZmF1bHQ6IGFkbWluCiAgICAgICAgdHlwZTogc3RyaW5nCiAgICAg\
ICAgdGl0bGU6IEtleWNsb2FrIGFkbWluIHVzZXJuYW1lCiAgICAgIC0gbmFtZTogYWRtaW5fcGFz\
c3dvcmQKICAgICAgICByZXF1aXJlZDogVHJ1ZQogICAgICAgIHR5cGU6IHN0cmluZwogICAgICAg\
IGRpc3BsYXlfdHlwZTogcGFzc3dvcmQKICAgICAgICB0aXRsZTogS2V5Y2xvYWsgYWRtaW4gcGFz\
c3dvcmQKICAgICAgLSBuYW1lOiBhcGJfa2V5Y2xvYWtfdXJpCiAgICAgICAgcmVxdWlyZWQ6IEZh\
bHNlCiAgICAgICAgdHlwZTogc3RyaW5nCiAgICAgICAgdGl0bGU6IEtleWNsb2FrIFVSTAogICAg\
ICAgIGRlc2NyaXB0aW9uOiBVUkwgd2hlcmUgdGhlIGFwcGxpY2F0aW9ucyBzaG91bGQgcmVkaXJl\
Y3QgdG8gZm9yIGF1dGhlbnRpY2F0aW9uLiBNdXN0IGJlIHJlc29sdmFibGUgYnkgdGhlIGJyb3dz\
ZXIgYW5kIHBvZHMuIExlYXZlIGVtcHR5IHRvIHVzZSB0aGUgaG9zdCBnZW5lcmF0ZWQgYnkgdGhl\
IHJvdXRlCiAgICAgIC0gbmFtZToga2V5Y2xvYWtfdXNlcnMKICAgICAgICByZXF1aXJlZDogRmFs\
c2UKICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgICBkaXNwbGF5X3R5cGU6IHRleHRhcmVhCiAg\
ICAgICAgdGl0bGU6IFVzZXJzCiAgICAgICAgZGVzY3JpcHRpb246IEpTT04gZGVmaW5pbmcgdGhl\
IHVzZXJzIHRvIGFkZCB0byB0aGUgcmVhbG0gYW5kIHRoZWlyIG1lbWJlcnNoaXBzCiAgICAgIC0g\
bmFtZToga2V5Y2xvYWtfcm9sZXMKICAgICAgICByZXF1aXJlZDogRmFsc2UKICAgICAgICB0eXBl\
OiBzdHJpbmcKICAgICAgICBkaXNwbGF5X3R5cGU6IHRleHRhcmVhCiAgICAgICAgdGl0bGU6IFJv\
bGVzCiAgICAgICAgZGVzY3JpcHRpb246IEpTT04gZGVmaW5pbmcgdGhlIHJvbGVzIHRvIGFkZCB0\
byB0aGUgcmVhbG0KICAgIGJpbmRfcGFyYW1ldGVyczogKl9iaW5kX3BhcmFtcwogICAgdXBkYXRl\
c190bzoKICAgICAgLSBwZXJzaXN0ZW50CgogIC0gbmFtZTogcGVyc2lzdGVudAogICAgZGVzY3Jp\
cHRpb246IERlcGxveSBrZXljbG9hayB3aXRoIHBlcnNpc3RlbmNlCiAgICBmcmVlOiBUcnVlCiAg\
ICBkZWZhdWx0OiBUcnVlCiAgICBtZXRhZGF0YToKICAgICAgZGlzcGxheU5hbWU6IEtleWNsb2Fr\
IHBlcnNpc3RlbnQKICAgIHBhcmFtZXRlcnM6CiAgICAgIC0gbmFtZTogYWRtaW5fdXNlcm5hbWUK\
ICAgICAgICByZXF1aXJlZDogVHJ1ZQogICAgICAgIGRlZmF1bHQ6IGFkbWluCiAgICAgICAgdHlw\
ZTogc3RyaW5nCiAgICAgICAgdGl0bGU6IEtleWNsb2FrIGFkbWluIHVzZXJuYW1lCiAgICAgIC0g\
bmFtZTogYWRtaW5fcGFzc3dvcmQKICAgICAgICByZXF1aXJlZDogVHJ1ZQogICAgICAgIHR5cGU6\
IHN0cmluZwogICAgICAgIGRpc3BsYXlfdHlwZTogcGFzc3dvcmQKICAgICAgICB0aXRsZTogS2V5\
Y2xvYWsgYWRtaW4gcGFzc3dvcmQKICAgICAgLSBuYW1lOiBkYl90eXBlCiAgICAgICAgcmVxdWly\
ZWQ6IFRydWUKICAgICAgICB0aXRsZTogRGF0YWJhc2UgVHlwZQogICAgICAgIGVudW06IFsnUG9z\
dGdyZVNRTCcsICdNeVNRTCcsICdNYXJpYURCJ10KICAgICAgICB0eXBlOiBlbnVtCiAgICAgICAg\
ZGVmYXVsdDogUG9zdGdyZVNRTAogICAgICAgIGRlc2NyaXB0aW9uOiBEYXRhYmFzZSB0eXBlIHRv\
IGNvbmZpZ3VyZS4gSXQgcmVxdWlyZXMgdGhlIGRhdGFiYXNlIEFQQiB0byBiZSBkZXBsb3llZCBh\
bmQgdGhlbiBib3VuZCB0byB0aGlzIGFwcGxpY2F0aW9uCiAgICAgICAgdXBkYXRhYmxlOiB0cnVl\
CiAgICAgIC0gbmFtZTogYXBiX2tleWNsb2FrX3VyaQogICAgICAgIHJlcXVpcmVkOiBGYWxzZQog\
ICAgICAgIHR5cGU6IHN0cmluZwogICAgICAgIHRpdGxlOiBLZXljbG9hayBVUkwKICAgICAgICBk\
ZXNjcmlwdGlvbjogVVJMIHdoZXJlIHRoZSBhcHBsaWNhdGlvbnMgc2hvdWxkIHJlZGlyZWN0IHRv\
IGZvciBhdXRoZW50aWNhdGlvbi4gTXVzdCBiZSByZXNvbHZhYmxlIGJ5IHRoZSBicm93c2VyIGFu\
ZCBwb2RzLiBMZWF2ZSBlbXB0eSB0byB1c2UgdGhlIGhvc3QgZ2VuZXJhdGVkIGJ5IHRoZSByb3V0\
ZQogICAgICAtIG5hbWU6IGtleWNsb2FrX3VzZXJzCiAgICAgICAgcmVxdWlyZWQ6IEZhbHNlCiAg\
ICAgICAgdHlwZTogc3RyaW5nCiAgICAgICAgZGlzcGxheV90eXBlOiB0ZXh0YXJlYQogICAgICAg\
IHRpdGxlOiBVc2VycwogICAgICAgIGRlc2NyaXB0aW9uOiBKU09OIGRlZmluaW5nIHRoZSB1c2Vy\
cyB0byBhZGQgdG8gdGhlIHJlYWxtIGFuZCB0aGVpciBtZW1iZXJzaGlwcwogICAgICAtIG5hbWU6\
IGtleWNsb2FrX3JvbGVzCiAgICAgICAgcmVxdWlyZWQ6IEZhbHNlCiAgICAgICAgdHlwZTogc3Ry\
aW5nCiAgICAgICAgZGlzcGxheV90eXBlOiB0ZXh0YXJlYQogICAgICAgIHRpdGxlOiBSb2xlcwog\
ICAgICAgIGRlc2NyaXB0aW9uOiBKU09OIGRlZmluaW5nIHRoZSByb2xlcyB0byBhZGQgdG8gdGhl\
IHJlYWxtCiAgICBiaW5kX3BhcmFtZXRlcnM6ICpfYmluZF9wYXJhbXMKICAgIHVwZGF0ZXNfdG86\
CiAgICAgIC0gZXBoZW1lcmFsCgogIC0gbmFtZTogZXh0ZXJuYWwKICAgIGRlc2NyaXB0aW9uOiBB\
bGxvd3MgYXV0aGVudGljYXRpbmcgYXBwbGljYXRpb25zIHRvIGFuIGV4dGVybmFsIEtleWNsb2Fr\
IGluc3RhbmNlCiAgICBmcmVlOiBUcnVlCiAgICBtZXRhZGF0YToKICAgICAgZGlzcGxheU5hbWU6\
IEtleWNsb2FrIChleHRlcm5hbCkKICAgIHBhcmFtZXRlcnM6CiAgICAgIC0gbmFtZTogYWRtaW5f\
dXNlcm5hbWUKICAgICAgICByZXF1aXJlZDogVHJ1ZQogICAgICAgIGRlZmF1bHQ6IGFkbWluCiAg\
ICAgICAgdHlwZTogc3RyaW5nCiAgICAgICAgdGl0bGU6IEtleWNsb2FrIGFkbWluIHVzZXJuYW1l\
CiAgICAgIC0gbmFtZTogYWRtaW5fcGFzc3dvcmQKICAgICAgICByZXF1aXJlZDogVHJ1ZQogICAg\
ICAgIHR5cGU6IHN0cmluZwogICAgICAgIGRpc3BsYXlfdHlwZTogcGFzc3dvcmQKICAgICAgICB0\
aXRsZTogS2V5Y2xvYWsgYWRtaW4gcGFzc3dvcmQKICAgICAgLSBuYW1lOiBhcGJfa2V5Y2xvYWtf\
dXJpCiAgICAgICAgcmVxdWlyZWQ6IFRydWUKICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgICB0\
aXRsZTogS2V5Y2xvYWsgVVJMCiAgICAgICAgZGVzY3JpcHRpb246IFVSTCB3aGVyZSB0aGUgYXBw\
bGljYXRpb25zIHNob3VsZCByZWRpcmVjdCB0byBmb3IgYXV0aGVudGljYXRpb24uIE11c3QgYmUg\
cmVzb2x2YWJsZSBieSB0aGUgYnJvd3NlciBhbmQgcG9kcy4KICAgICAgLSBuYW1lOiBrZXljbG9h\
a191c2VycwogICAgICAgIHJlcXVpcmVkOiBGYWxzZQogICAgICAgIHR5cGU6IHN0cmluZwogICAg\
ICAgIGRpc3BsYXlfdHlwZTogdGV4dGFyZWEKICAgICAgICB0aXRsZTogVXNlcnMKICAgICAgICBk\
ZXNjcmlwdGlvbjogSlNPTiBkZWZpbmluZyB0aGUgdXNlcnMgdG8gYWRkIHRvIHRoZSByZWFsbSBh\
bmQgdGhlaXIgbWVtYmVyc2hpcHMKICAgICAgLSBuYW1lOiBrZXljbG9ha19yb2xlcwogICAgICAg\
IHJlcXVpcmVkOiBGYWxzZQogICAgICAgIHR5cGU6IHN0cmluZwogICAgICAgIGRpc3BsYXlfdHlw\
ZTogdGV4dGFyZWEKICAgICAgICB0aXRsZTogUm9sZXMKICAgICAgICBkZXNjcmlwdGlvbjogSlNP\
TiBkZWZpbmluZyB0aGUgcm9sZXMgdG8gYWRkIHRvIHRoZSByZWFsbQogICAgYmluZF9wYXJhbWV0\
ZXJzOiAqX2JpbmRfcGFyYW1zCg=="

COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles

RUN chmod -R g=u /opt/{ansible,apb}
USER apb
