FROM ansibleplaybookbundle/apb-base

LABEL "com.redhat.apb.version"="0.1.0"
LABEL "com.redhat.apb.spec"=\
"IyMgU2hhcmVkIHBhcmFtZXRlcnMKX2JpbmRfcGFyYW1zOiAmX2JpbmRfcGFyYW1zCiMgUHJvdmlz\
aW9uIGJpbmQgcGFyYW1zCiAgLSBuYW1lOiBzZXJ2aWNlX25hbWUKICAgIGRpc3BsYXlfZ3JvdXA6\
IFByb3Zpc2lvbgogICAgcmVxdWlyZWQ6IFRydWUKICAgIHRpdGxlOiBOYW1lIG9mIHRoZSBzZXJ2\
aWNlIHRvIGJpbmQKICAgIHR5cGU6IHN0cmluZwogIC0gbmFtZTogcmVkaXJlY3RfdXJpcwogICAg\
ZGlzcGxheV9ncm91cDogUHJvdmlzaW9uCiAgICByZXF1aXJlZDogVHJ1ZQogICAgdGl0bGU6IFJl\
ZGlyZWN0IFVSSXMKICAgIGRlc2NyaXB0aW9uOiBWYWxpZCBSZWRpcmVjdCBVUklzIGEgYnJvd3Nl\
ciBjYW4gcmVkaXJlY3QgdG8gYWZ0ZXIgYSBzdWNjZXNzZnVsIGxvZ2luL2xvZ291dC4gU2ltcGxl\
IHdpbGRjYXJkcyBhcmUgYWxsb3dlZC4gZS5nLiBodHRwczovL215c2VydmljZS1teXByb2plY3Qu\
YXBwcy5leGFtcGxlLmNvbS8qCiAgICB0eXBlOiBzdHJpbmcKICAtIG5hbWU6IHdlYl9vcmlnaW5z\
CiAgICBkaXNwbGF5X2dyb3VwOiBQcm92aXNpb24KICAgIHRpdGxlOiBXZWIgT3JpZ2lucwogICAg\
ZGVzY3JpcHRpb246IFdlYiBPcmlnaW5zIHRvIGFsbG93IENPUlMKICAgIHR5cGU6IHN0cmluZwog\
ICMgQmluZCBzZWNyZXQgcGFyYW1zICh3aGljaCBlbnYgdmFyaWFibGVzIHRvIGNyZWF0ZSkKICAt\
IG5hbWU6IHNzb191cmxfbmFtZQogICAgZGVmYXVsdDogU1NPX1VSTAogICAgZGlzcGxheV9ncm91\
cDogQmluZGluZwogICAgdGl0bGU6IEtleWNsb2FrIFVSTCBWYXJpYWJsZSBuYW1lCiAgICBkZXNj\
cmlwdGlvbjogSG93IHRoZSBhcHBsaWNhdGlvbiB3aWxsIHJlZmVyIHRvIHRoZSBLZXljbG9hayBV\
UkwKICAgIHR5cGU6IHN0cmluZwogIC0gbmFtZTogc3NvX3JlYWxtX25hbWUKICAgIGRlZmF1bHQ6\
IFNTT19SRUFMTQogICAgZGlzcGxheV9ncm91cDogQmluZGluZwogICAgdGl0bGU6IEtleWNsb2Fr\
IFJlYWxtIFZhcmlhYmxlIG5hbWUKICAgIGRlc2NyaXB0aW9uOiBIb3cgdGhlIGFwcGxpY2F0aW9u\
IHdpbGwgcmVmZXIgdG8gdGhlIEtleWNsb2FrIFJlYWxtCiAgICB0eXBlOiBzdHJpbmcKICAtIG5h\
bWU6IHNzb19jbGllbnRfbmFtZQogICAgZGVmYXVsdDogU1NPX0NMSUVOVAogICAgZGlzcGxheV9n\
cm91cDogQmluZGluZwogICAgdGl0bGU6IEtleWNsb2FrIENsaWVudCBWYXJpYWJsZSBuYW1lCiAg\
ICBkZXNjcmlwdGlvbjogSG93IHRoZSBhcHBsaWNhdGlvbiB3aWxsIHJlZmVyIHRvIHRoZSBLZXlj\
bG9hayBDbGllbnQgbmFtZQogICAgdHlwZTogc3RyaW5nCnZlcnNpb246IDEuMApuYW1lOiBrZXlj\
bG9hay1hcGIKZGVzY3JpcHRpb246IEtleWNsb2FrIC0gT3BlbiBTb3VyY2UgSWRlbnRpdHkgYW5k\
IEFjY2VzcyBNYW5hZ2VtZW50CmJpbmRhYmxlOiBUcnVlCmFzeW5jOiBvcHRpb25hbAp0YWdzOgog\
IC0gc3NvCiAgLSBrZXljbG9hawptZXRhZGF0YToKICBkaXNwbGF5TmFtZTogS2V5Y2xvYWsgKEFQ\
QikKICBpbWFnZVVybDogImh0dHBzOi8vcGJzLnR3aW1nLmNvbS9wcm9maWxlX2ltYWdlcy83MDIx\
MTk4MjE5NzkzNDQ4OTcvb0FDMDVjRUJfNDAweDQwMC5wbmciCiAgZG9jdW1lbnRhdGlvblVybDog\
Imh0dHA6Ly93d3cua2V5Y2xvYWsub3JnL2RvY3VtZW50YXRpb24uaHRtbCIKICBwcm92aWRlckRp\
c3BsYXlOYW1lOiAiUmVkIEhhdCwgSW5jLiIKICBkZXBlbmRlbmNpZXM6IFsnUG9zdGdyZXNxbDo5\
LjUnXQogIHNlcnZpY2VOYW1lOiBrZXljbG9hawpwbGFuczoKICAtIG5hbWU6IGVwaGVtZXJhbAog\
ICAgZGVzY3JpcHRpb246IERlcGxveSBrZXljbG9hayB3aXRob3V0IHBlcnNpc3RlbmNlCiAgICBm\
cmVlOiBUcnVlCiAgICBtZXRhZGF0YToKICAgICAgZGlzcGxheU5hbWU6IEtleWNsb2FrIGVwaGVt\
ZXJhbAogICAgcGFyYW1ldGVyczoKICAgICAgLSBuYW1lOiBhZG1pbl91c2VybmFtZQogICAgICAg\
IHJlcXVpcmVkOiBUcnVlCiAgICAgICAgZGVmYXVsdDogYWRtaW4KICAgICAgICB0eXBlOiBzdHJp\
bmcKICAgICAgICB0aXRsZTogS2V5Y2xvYWsgYWRtaW4gdXNlcm5hbWUKICAgICAgLSBuYW1lOiBh\
ZG1pbl9wYXNzd29yZAogICAgICAgIHJlcXVpcmVkOiBUcnVlCiAgICAgICAgdHlwZTogc3RyaW5n\
CiAgICAgICAgZGlzcGxheV90eXBlOiBwYXNzd29yZAogICAgICAgIHRpdGxlOiBLZXljbG9hayBh\
ZG1pbiBwYXNzd29yZAogICAgICAtIG5hbWU6IGFwYl9rZXljbG9ha191cmkKICAgICAgICByZXF1\
aXJlZDogRmFsc2UKICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgICB0aXRsZTogS2V5Y2xvYWsg\
VVJMCiAgICAgICAgZGVzY3JpcHRpb246IFVSTCB3aGVyZSB0aGUgYXBwbGljYXRpb25zIHNob3Vs\
ZCByZWRpcmVjdCB0byBmb3IgYXV0aGVudGljYXRpb24uIE11c3QgYmUgcmVzb2x2YWJsZSBieSB0\
aGUgYnJvd3NlciBhbmQgcG9kcy4gTGVhdmUgZW1wdHkgdG8gdXNlIHRoZSBob3N0IGdlbmVyYXRl\
ZCBieSB0aGUgcm91dGUKICAgICAgLSBuYW1lOiBrZXljbG9ha191c2VycwogICAgICAgIHJlcXVp\
cmVkOiBGYWxzZQogICAgICAgIHR5cGU6IHN0cmluZwogICAgICAgIGRpc3BsYXlfdHlwZTogdGV4\
dGFyZWEKICAgICAgICB0aXRsZTogVXNlcnMKICAgICAgICBkZXNjcmlwdGlvbjogSlNPTiBkZWZp\
bmluZyB0aGUgdXNlcnMgdG8gYWRkIHRvIHRoZSByZWFsbSBhbmQgdGhlaXIgbWVtYmVyc2hpcHMK\
ICAgICAgLSBuYW1lOiBrZXljbG9ha19yb2xlcwogICAgICAgIHJlcXVpcmVkOiBGYWxzZQogICAg\
ICAgIHR5cGU6IHN0cmluZwogICAgICAgIGRpc3BsYXlfdHlwZTogdGV4dGFyZWEKICAgICAgICB0\
aXRsZTogUm9sZXMKICAgICAgICBkZXNjcmlwdGlvbjogSlNPTiBkZWZpbmluZyB0aGUgcm9sZXMg\
dG8gYWRkIHRvIHRoZSByZWFsbQogICAgYmluZF9wYXJhbWV0ZXJzOiAqX2JpbmRfcGFyYW1zCgog\
IC0gbmFtZTogcGVyc2lzdGVudAogICAgZGVzY3JpcHRpb246IERlcGxveSBrZXljbG9hayB3aXRo\
IHBlcnNpc3RlbmNlCiAgICBmcmVlOiBUcnVlCiAgICBkZWZhdWx0OiBUcnVlCiAgICBtZXRhZGF0\
YToKICAgICAgZGlzcGxheU5hbWU6IEtleWNsb2FrIHBlcnNpc3RlbnQKICAgIHBhcmFtZXRlcnM6\
CiAgICAgIC0gbmFtZTogYWRtaW5fdXNlcm5hbWUKICAgICAgICByZXF1aXJlZDogVHJ1ZQogICAg\
ICAgIGRlZmF1bHQ6IGFkbWluCiAgICAgICAgdHlwZTogc3RyaW5nCiAgICAgICAgdGl0bGU6IEtl\
eWNsb2FrIGFkbWluIHVzZXJuYW1lCiAgICAgIC0gbmFtZTogYWRtaW5fcGFzc3dvcmQKICAgICAg\
ICByZXF1aXJlZDogVHJ1ZQogICAgICAgIHR5cGU6IHN0cmluZwogICAgICAgIGRpc3BsYXlfdHlw\
ZTogcGFzc3dvcmQKICAgICAgICB0aXRsZTogS2V5Y2xvYWsgYWRtaW4gcGFzc3dvcmQKICAgICAg\
LSBuYW1lOiBhcGJfa2V5Y2xvYWtfdXJpCiAgICAgICAgcmVxdWlyZWQ6IEZhbHNlCiAgICAgICAg\
dHlwZTogc3RyaW5nCiAgICAgICAgdGl0bGU6IEtleWNsb2FrIFVSTAogICAgICAgIGRlc2NyaXB0\
aW9uOiBVUkwgd2hlcmUgdGhlIGFwcGxpY2F0aW9ucyBzaG91bGQgcmVkaXJlY3QgdG8gZm9yIGF1\
dGhlbnRpY2F0aW9uLiBNdXN0IGJlIHJlc29sdmFibGUgYnkgdGhlIGJyb3dzZXIgYW5kIHBvZHMu\
IExlYXZlIGVtcHR5IHRvIHVzZSB0aGUgaG9zdCBnZW5lcmF0ZWQgYnkgdGhlIHJvdXRlCiAgICAg\
IC0gbmFtZTogcHZjX3NpemUKICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgICBkZWZhdWx0OiAy\
MDBNaQogICAgICAgIGRlc2NyaXB0aW9uOiBEYXRhYmFzZSBzdG9yYWdlIHNpemUKICAgICAgICB0\
aXRsZTogU3RvcmFnZSBzaXplCiAgICAgIC0gbmFtZToga2V5Y2xvYWtfdXNlcnMKICAgICAgICBy\
ZXF1aXJlZDogRmFsc2UKICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgICBkaXNwbGF5X3R5cGU6\
IHRleHRhcmVhCiAgICAgICAgdGl0bGU6IFVzZXJzCiAgICAgICAgZGVzY3JpcHRpb246IEpTT04g\
ZGVmaW5pbmcgdGhlIHVzZXJzIHRvIGFkZCB0byB0aGUgcmVhbG0gYW5kIHRoZWlyIG1lbWJlcnNo\
aXBzCiAgICAgIC0gbmFtZToga2V5Y2xvYWtfcm9sZXMKICAgICAgICByZXF1aXJlZDogRmFsc2UK\
ICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgICBkaXNwbGF5X3R5cGU6IHRleHRhcmVhCiAgICAg\
ICAgdGl0bGU6IFJvbGVzCiAgICAgICAgZGVzY3JpcHRpb246IEpTT04gZGVmaW5pbmcgdGhlIHJv\
bGVzIHRvIGFkZCB0byB0aGUgcmVhbG0KICAgIGJpbmRfcGFyYW1ldGVyczogKl9iaW5kX3BhcmFt\
cwoKICAtIG5hbWU6IGV4dGVybmFsCiAgICBkZXNjcmlwdGlvbjogQWxsb3dzIGF1dGhlbnRpY2F0\
aW5nIGFwcGxpY2F0aW9ucyB0byBhbiBleHRlcm5hbCBLZXljbG9hayBpbnN0YW5jZQogICAgZnJl\
ZTogVHJ1ZQogICAgbWV0YWRhdGE6CiAgICAgIGRpc3BsYXlOYW1lOiBLZXljbG9hayAoZXh0ZXJu\
YWwpCiAgICBwYXJhbWV0ZXJzOgogICAgICAtIG5hbWU6IGFkbWluX3VzZXJuYW1lCiAgICAgICAg\
cmVxdWlyZWQ6IFRydWUKICAgICAgICBkZWZhdWx0OiBhZG1pbgogICAgICAgIHR5cGU6IHN0cmlu\
ZwogICAgICAgIHRpdGxlOiBLZXljbG9hayBhZG1pbiB1c2VybmFtZQogICAgICAtIG5hbWU6IGFk\
bWluX3Bhc3N3b3JkCiAgICAgICAgcmVxdWlyZWQ6IFRydWUKICAgICAgICB0eXBlOiBzdHJpbmcK\
ICAgICAgICBkaXNwbGF5X3R5cGU6IHBhc3N3b3JkCiAgICAgICAgdGl0bGU6IEtleWNsb2FrIGFk\
bWluIHBhc3N3b3JkCiAgICAgIC0gbmFtZTogYXBiX2tleWNsb2FrX3VyaQogICAgICAgIHJlcXVp\
cmVkOiBUcnVlCiAgICAgICAgdHlwZTogc3RyaW5nCiAgICAgICAgdGl0bGU6IEtleWNsb2FrIFVS\
TAogICAgICAgIGRlc2NyaXB0aW9uOiBVUkwgd2hlcmUgdGhlIGFwcGxpY2F0aW9ucyBzaG91bGQg\
cmVkaXJlY3QgdG8gZm9yIGF1dGhlbnRpY2F0aW9uLiBNdXN0IGJlIHJlc29sdmFibGUgYnkgdGhl\
IGJyb3dzZXIgYW5kIHBvZHMuCiAgICAgIC0gbmFtZToga2V5Y2xvYWtfdXNlcnMKICAgICAgICBy\
ZXF1aXJlZDogRmFsc2UKICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgICBkaXNwbGF5X3R5cGU6\
IHRleHRhcmVhCiAgICAgICAgdGl0bGU6IFVzZXJzCiAgICAgICAgZGVzY3JpcHRpb246IEpTT04g\
ZGVmaW5pbmcgdGhlIHVzZXJzIHRvIGFkZCB0byB0aGUgcmVhbG0gYW5kIHRoZWlyIG1lbWJlcnNo\
aXBzCiAgICAgIC0gbmFtZToga2V5Y2xvYWtfcm9sZXMKICAgICAgICByZXF1aXJlZDogRmFsc2UK\
ICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgICBkaXNwbGF5X3R5cGU6IHRleHRhcmVhCiAgICAg\
ICAgdGl0bGU6IFJvbGVzCiAgICAgICAgZGVzY3JpcHRpb246IEpTT04gZGVmaW5pbmcgdGhlIHJv\
bGVzIHRvIGFkZCB0byB0aGUgcmVhbG0KICAgIGJpbmRfcGFyYW1ldGVyczogKl9iaW5kX3BhcmFt\
cwo="

COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles

RUN chmod -R g=u /opt/{ansible,apb}
USER apb
